# Подтверждение записи с помощью робота Ожидание сообщения

В процессе взаимодействия с клиентом на любом этапе сделки может происходить отправка клиенту сообщений в WhatsApp и получение от него ответов. Если вопросы задаваемые клиенту всегда одинаковые, а ответы получаемые от клиента однотипные, этот процесс можно автоматизировать с помощью роботов [otpravka-soobsheniya.md](../../roboty-i-aktiviti/roboty/otpravka-soobsheniya.md "mention") и [ozhidanie-soobsheniya.md](../../roboty-i-aktiviti/roboty/ozhidanie-soobsheniya.md "mention")

Рассмотрим следующий сценарий:

1. Отправляем клиенту в WhatsApp сообщение. В тексте сообщения задаём вопрос таким образом, чтобы на него можно было ответить Да/Нет и просим клиента в ответном сообщении прислать Да или Нет. Ожидаем ответ клиента.
2. Если клиент пишет в ответ Да, переводим сделку в следующую стадию.
3. Если клиент пишет в ответ Нет или не отвечает дольше заданного времени – ставим на ответственного по сделке Дело позвонить клиенту.

Выполним пошаговую настройку описанного выше сценария.

На стадию **«Новая регистрация»** добавим робота **«\[OLChat — Чаты и Группы WhatsApp] Отправка сообщения»,** в котором попросим клиента подтвердить регистрацию на мероприятие.

<figure><img src="../../.gitbook/assets/image (255).png" alt=""><figcaption></figcaption></figure>

Выполните настройку робота. Для этого на добавленном роботе нажмите на кнопку «изменить», чтобы открыть интерфейс редактирования робота.&#x20;

<figure><img src="../../.gitbook/assets/image (810).png" alt=""><figcaption></figcaption></figure>

1. Укажите **Линию WhatsApp,** через которую планируете сделать отправку
2. Введите **Номер телефона**, на который необходимо отправить сообщение
3. В поле **«Сообщение»** напишите текст

Нажмите на кнопку «СОХРАНИТЬ».

Далее, на текущую стадию добавим робота **«\[OLChat — Чаты и Группы WhatsApp] Ожидание сообщения».**

<figure><img src="../../.gitbook/assets/image (297).png" alt=""><figcaption></figcaption></figure>

Выполним настройку робота. Для этого на добавленном роботе нажмите на кнопку «изменить», чтобы открыть интерфейс редактирования робота.&#x20;

Робот **«Ожидание сообщения»** позволяет дождаться ответа пользователя на ваше сообщение. Ответ пользователя содержится в дополнительных результатах робота. Мы ожидаем получить от клиента два варианта ответов: Да или Нет.

Настроим добавленного робота

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. Выберите **Линию WhatsApp,** для которой ожидаем сообщение
3. Введите **Номер телефона** клиента, на который было отправлено сообщение и с которого мы ожидаем получить ответ
4. Укажите **Период ожидания (в минутах),** в течение которого робот будет ожидать сообщение от клиента

<figure><img src="../../.gitbook/assets/image (789).png" alt=""><figcaption></figcaption></figure>

Нажмите на кнопку «СОХРАНИТЬ».

Далее, необходимо обработать ответ клиента. Если клиент ответил «Да» – переведём сделку в стадию «Регистрация подтверждена». Добавим робота **«Сменить стадию»** и выполним его настройку.

<figure><img src="../../.gitbook/assets/image (293).png" alt=""><figcaption></figcaption></figure>

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. Настроим условие срабатывания робота. Для этого необходимо обработать ответ пользователя, содержащийся в дополнительных результатах робота «Ожидание сообщения»

<figure><img src="../../.gitbook/assets/image (302).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (975).png" alt=""><figcaption></figcaption></figure>

3. Укажите стадию, на которую нужно изменить сделку

<figure><img src="../../.gitbook/assets/image (879).png" alt=""><figcaption></figcaption></figure>

Нажмите на кнопку «СОХРАНИТЬ».

Последним шагом, добавим робота **«Запланировать дело»** и настроим его таким образом, чтобы он поставил на ответственного по сделке дело «Позвонить клиенту» в случае, если клиент ответил «Нет» или не ответил в указанный промежуток времени.

<figure><img src="../../.gitbook/assets/image (811).png" alt=""><figcaption></figcaption></figure>

Выполним настройку робота. Для этого на добавленном роботе нажмите на кнопку «изменить», чтобы открыть интерфейс редактирования робота.

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. Настроим условие срабатывания робота. Для этого необходимо обработать ответ пользователя, содержащийся в дополнительных результатах робота «Ожидание сообщения». Здесь мы можем обработать ответ «Нет» и тот случай, если клиент не ответил в указанный промежуток времени.

<figure><img src="../../.gitbook/assets/image (832).png" alt=""><figcaption></figcaption></figure>

Нажмите на кнопку «СОХРАНИТЬ».

{% hint style="info" %}
Следует понимать, что проверка на соответствие ответа с помощью условий может сработать некорректно в случае, если клиент ответит как-то по-другому, не так, как вы ожидаете в заданном условии. Вы можете также заменить ответы «Да/Нет» на цифры, чтобы побудить клиента ответить как можно короче, либо собрать некоторую статистику ответов от клиента и с помощью добавления дополнительных условий усовершенствовать данную систему.
{% endhint %}
