# Создание чата с клиентом и добавление в него сотрудников Б24 с помощью роботов

Рассмотрим ситуацию, в которой на определённом этапе сделки вам необходимо создать чат с клиентом в WhatsApp и добавить в него сотрудников портала.

Сделать это можно автоматизированно, последовательно используя комбинацию следующих роботов:

1. [sozdanie-chata-ol.md](../../roboty-i-aktiviti/roboty/sozdanie-chata-ol.md "mention") – робот создаёт чат Открытой линии
2. [poluchit-informaciyu-o-chate-iz-whatsapp.md](../../roboty-i-aktiviti/roboty/poluchit-informaciyu-o-chate-iz-whatsapp.md "mention") – вспомогательный робот, который позволяет получить ID созданного чата. ID будет использоваться в последующих роботах.
3. [upravlenie-otkrytoi-liniei.md](../../roboty-i-aktiviti/roboty/upravlenie-otkrytoi-liniei.md "mention") и действие **Забрать диалог** – позволяет закрепить созданный диалог за указанным пользователем.
4. [upravlenie-otkrytoi-liniei.md](../../roboty-i-aktiviti/roboty/upravlenie-otkrytoi-liniei.md "mention") и действие **Присоединиться к открытому диалогу** – позволяет добавить указанного пользователя в активный чат.

Выполним добавление и настройку указанных роботов.

Для начала добавим робота **«\[OLChat] Создание чата ОЛ»**. Для этого перейдите в **Роботы ‒ Создать ‒ Выбор стадии ‒ Другие роботы ‒ \[OLChat] Создание чата ОЛ ‒ Добавить.**

Выполните настройку робота.

<figure><img src="../../.gitbook/assets/image (1099).png" alt=""><figcaption></figcaption></figure>

1. Укажите **Линию WhatsApp,** для которой производится создание чата Открытой линии
2. Введите **Номер телефона**, для которого будет создан чат

Нажмите на кнопку «СОХРАНИТЬ».

Теперь необходимо получить ID созданного чата. Сделать это можно с помощью робота **«\[OLChat] \[ОЛ] Получить информацию о чате из WhatsApp».**

Добавьте робота тем же методом, который описан выше и выполните его настройку.

<figure><img src="../../.gitbook/assets/image (1100).png" alt=""><figcaption></figcaption></figure>

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. Укажите **Линию,** для которой осуществляется получение информации
3. Введите **Номер телефона**, для которого осуществляется получение информации

Остальные настройки можно оставить по умолчанию. Нажмите на кнопку «СОХРАНИТЬ»

Далее, добавим робота **«\[OLChat] \[ОЛ] Управление открытой линией»** и выполним его настройку. Для этого перейдите в **Роботы ‒ Создать ‒ Выбор стадии ‒ Другие роботы ‒ \[OLChat] \[ОЛ] Управление открытой линией ‒ Добавить.**

<figure><img src="../../.gitbook/assets/image (1101).png" alt=""><figcaption></figcaption></figure>

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. В поле **Выберите действие** укажите действие **Забрать диалог**
3. Укажите **ID чата**, для которого будет создан чат. Получить его можно из дополнительных результатов работы робота **\[OLChat] \[ОЛ] Получить информацию о чате из WhatsApp,** который был добавлен на предыдущем шаге.
4. В поле **Запускать от имени** укажите того пользователя, за кем должен закрепиться диалог.

Нажмите на кнопку «СОХРАНИТЬ»

Последним шагом добавим робота **«\[OLChat] \[ОЛ] Управление открытой линией»,** который позволяет добавлять в чат сотрудников и настроем его.

<figure><img src="../../.gitbook/assets/image (1102).png" alt=""><figcaption></figcaption></figure>

1. Обязательно укажите, что робот должен сработать **после предыдущего**
2. В поле **Выберите действие** укажите действие **Присоединиться к открытому диалогу**
3. Укажите **ID чата**, для которого будет создан чат. Получить его можно из дополнительных результатов работы робота **\[OLChat] \[ОЛ] Получить информацию о чате из WhatsApp,** который был добавлен на предыдущем шаге.
4. В поле **Запускать от имени** укажите того пользователя, кого нужно добавить в чат.

Нажмите на кнопку «СОХРАНИТЬ».

{% hint style="info" %}
Если в чат необходимо добавить ещё сотрудников – продублируйте последнего робота **«\[OLChat] \[ОЛ] Управление открытой линией»** и в поле **Запускать от имени** укажите пользователя, которого нужно добавить в чат.
{% endhint %}
