# Ожидание сообщения



{% hint style="warning" %}
Обратите внимание, что переменная **\{{Телефон\}} / \{{Контакт: Телефон\}} / \{{Компания: Телефон\}}** или **\{{Телефон (текст)\}} / \{{Контакт: Телефон (текст)\}} / \{{Компания: Телефон (текст)\}}** собирает и передаёт номера ВСЕХ типов.

Если в робот или активити бизнес-процесса передан подобный массив номеров или текстовая строка с номерами и их там несколько – робот или активити бизнес-процесса «Ожидание сообщения» <mark style="color:red;">**не сработает!**</mark> Для корректной работы робота в переменной необходимо использовать только один конкретный номер. Например: **\{{Контакт: Телефон для рассылок\}}**
{% endhint %}

Робот «\[OLChat — Чаты и Группы WhatsApp] Ожидание сообщения» позволяет дождаться ответа пользователя на ваше сообщение. Ответ пользователя содержится в дополнительных результатах робота. Доступны следующие ответы пользователя: Тип сообщения, Текст, Файл, Имя файла:

<figure><img src="../../.gitbook/assets/image (337).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Ответ пользователя вы можете использовать в дальнейших сценариях автоматизации и настроить реакцию, что должно происходить при получении того или иного ответа от клиента.
{% endhint %}

Чтобы добавить робота перейдите в **Роботы ‒ Создать ‒ Выбор стадии ‒ Другие роботы ‒ \[OLChat] Ожидать сообщения ‒ Добавить.**

<figure><img src="../../.gitbook/assets/image (1330).png" alt=""><figcaption></figcaption></figure>

Выполните настройку робота. Для этого на добавленном роботе нажмите на кнопку «изменить», чтобы открыть интерфейс редактирования робота:

1. Укажите **Линию WhatsApp,** на которой ожидаем сообщение
2. Введите **Номер телефона**, на котором ожидаем сообщение
3. В поле **Период ожидания (в минутах)** укажите количество минут, в течение которых робот будет ожидать сообщение

{% hint style="success" %}
Лимита по минутам ожидания - нет.
{% endhint %}

<figure><img src="../../.gitbook/assets/image (469).png" alt=""><figcaption></figcaption></figure>

Остальные настройки можно оставить по умолчанию. Нажмите на кнопку «СОХРАНИТЬ»

{% hint style="info" %}
Чтобы дождаться ответа пользователя и использовать отправленный им ответ в дальнейших сценариях автоматизации, статус или стадия сущности в которой запущен робот не должна изменятся! При перемещении на другую стадию робот завершит свою работу и не среагирует на ответ пользователя.
{% endhint %}

{% hint style="success" %}
Если вы хотите получать ответ пользователя вне зависимости от статусов или стадий – используйте функционал бизнес-процессов. Также следует помнить о том, что для одной сущности вы можете запустить не более 2-х бизнес-процессов одновременно. Подробнее в статье от Битрикс24 [Ограничение на запуск процессов](https://helpdesk.bitrix24.ru/open/5671433/)
{% endhint %}
