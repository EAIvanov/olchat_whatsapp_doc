# Как вывести результат работы робота в комментарий

При разработке и использовании уже настроенных роботов, бывает необходимо узнать подробности выполнения того или иного робота. Для этого в системе предусмотрен журнал выполнения бизнес-процессов (лог). Однако данный журнал недоступен на тарифах Битрикс24, в которых нет бизнес-процессов.

Если на вашем тарифе нет журнала бизнес-процессов, выходом из ситуации может служить вывод результатов работы робота в комментарий в сущности.

Выполним пошаговую настройку следующего сценария работы:

1. Робот отправляет сообщение в WhatsApp
2. Результат выполнения робота выводится в комментарий в таймлайне элемента

Для начала добавим робота **«\[OLChat] Отправка сообщения»** и выполним его настройку

<figure><img src="../../.gitbook/assets/image (896).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (848).png" alt=""><figcaption></figcaption></figure>

Выведем результат работы робота в комментарий в таймлайне элемента. Для этого добавим стандартного робота Битрикс24 **«Добавить комментарий в элемент».**

<figure><img src="../../.gitbook/assets/image (672).png" alt=""><figcaption></figcaption></figure>

Выполним настройку робота. Результат выполнения предыдущего робота **«\[OLChat] Отправка сообщения»** содержится в дополнительных результатах отработанного робота в разделе Роботы — \[OLChat] Отправка сообщения. Добавим значения **«Сообщение отправлено?»** и **«Описание ошибки»**

<figure><img src="../../.gitbook/assets/image (229).png" alt=""><figcaption></figcaption></figure>

Вывод можно оформить следующим образом, как показано на скриншоте ниже:

<figure><img src="../../.gitbook/assets/image (239).png" alt=""><figcaption></figcaption></figure>

Установите галочку срабатывания «после предыдущего робота» и нажмите кнопку «СОХРАНИТЬ».

Попробуем выполнить отправку. В статусе **«Сообщение отправлено?»** получаем вывод **«Y»**, что свидетельствует об успешной отправке, а **«Описание ошибки»** содержит пустое значение, т.к. ошибок не было.

<figure><img src="../../.gitbook/assets/image (411).png" alt=""><figcaption></figcaption></figure>

Вы можете усовершенствовать вашего робота вывода сообщения в комментарий и выводить комментарий только в том случае, когда роботу **\[OLChat] Отправка сообщения** не удалось отправить сообщение или присутствуют ошибки при отправке.

Для этого в роботе **«Добавить комментарий в элемент»** выполните настройку условия, при котором будет производиться вывод комментария в таймлайн.

Например, выведем только те комментарии, которые не соответствуют критерию **«Y»** (успешная отправка) в статусе **«Сообщение отправлено?»**

<figure><img src="../../.gitbook/assets/image (573).png" alt=""><figcaption></figcaption></figure>

В этом случае вы будете получать комментарии в таймлайне только в том случае, если при отправке возникли проблемы:

<figure><img src="../../.gitbook/assets/image (782).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Более подробная информация об ошибках и их значениях содержится в статье [Описание ошибок, возвращаемых роботами и активити бизнес-процессов](opisanie-oshibok-vozvrashaemykh-robotami-i-aktiviti-biznes-processov.md)
{% endhint %}
