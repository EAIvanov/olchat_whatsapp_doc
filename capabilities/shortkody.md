# Шорткоды

Шорткоды – это конструкции, которые позволяют гибко использовать различные типы сообщений. С их помощью можно выполнять какое-либо действие непосредственно в текстовом сообщении. Они могут быть использованы в роботах, бизнес-процессах, в карточке CRM, в чатах и группах для отправки приложением OLChat файлов, голосовых сообщений, ссылок, визиток и месторасположения.

{% hint style="warning" %}
Функционал превью для ссылки временно не работает! Мы работаем над этой возможностью.
{% endhint %}

Ниже представлен список поддерживаемых шорткодов:

| Описание                                   |                          Шорткод                         |                                         Условные обозначения                                         |
| ------------------------------------------ | :------------------------------------------------------: | :--------------------------------------------------------------------------------------------------: |
| Файл с диска                               |                     \[=disk:file\_id]                    |           file\_id – id файла на Битрикс.Диск. Желательно использовать файлы из Общей папки          |
| Файл по ссылке                             |                       \[=file:url]                       |                                      url – прямая ссылка на файл                                     |
| Файл из поля crm                           |       \[=crm\_file:\<crm\_type>\|\<crm\_id>\|field]      |      <p>crm_type – тип сущности</p><p>crm_id – ИД сущности</p><p>field – ИД поля в сущности</p>      |
| Файл из прикрепленного файла поля crm      |                  \[=crm\_file:file\_id]                  |                              file\_id – id прикрепленного файла поля CRM                             |
| Голосовое по ссылке                        |                       \[=voice:url]                      |                                      url – прямая ссылка на файл                                     |
| Голосовое из поля crm                      |      \[=crm\_voice:\<crm\_type>\|\<crm\_id>\|field]      |      <p>crm_type – тип сущности</p><p>crm_id – ИД сущности</p><p>field – ИД поля в сущности</p>      |
| Голосовое из прикреплённого файла поля crm |                  \[=crm\_voice:file\_id]                 |                              file\_id – id прикрепленного файла поля CRM                             |
| Визитка                                    |                    \[=vcard:\<phone>]                    |                                    phone – номер телефона визитки                                    |
| Ссылка с автосбором информации             |                       \[=link:url]                       |                                       url – ссылка для отправки                                      |
| Месторасположение                          | \[=location:\<lat>\|\<lng>\|\<address>\|<\<address\_2>>] | <p>lat – Широта</p><p>lng – Долгота</p><p>address – Адрес</p><p>address_2 – вторая строка адреса</p> |
| Ссылка на youtube видео                    |                  \[=youtube:\<v\_code>]                  |                                          v\_code – код видео                                         |



Подробнее про настройку отправки файла в зависимости от источника и как получить ID файла [читайте здесь.](https://docs.olchat.io/roboty-i-aktiviti/sozdanie-pryamoi-ssylki-na-fail)



Варианты использования шорткодов:

* Быстрые ответы в чате
* В шаблонах сообщений в приложении
* В роботах и бизнес-процессах
* В карточке сущности в виджете

{% hint style="info" %}
Шорткоды следует использовать без угловых скобок **< >** и **<< >>.** Скобки указывают на обязательность и необязательность значений, содержащихся внутри скобок.
{% endhint %}

{% hint style="info" %}
Шорткоды просто дают возможность в одном сообщении указывать последовательность отправки, но это не означает, что всё будет отправлено в одном шаблоне.
{% endhint %}

{% hint style="info" %}
Значения, указанные в одинарных угловых скобках, вида: **<\_\_\_>** – являются **обязательными** к заполнению. Без указания данных значений, шорткод корректно не отработает!

Значения, указанные в двойных угловых скобках, вида: **<\<preview\_link>>, <\<description>>** и т. д. **не обязательны** к заполнению. Их отсутствие не повлияет на корректную работу шорткода.
{% endhint %}

#### Пример использования шорткодов

Предположим, что нам необходимо отправить карту с местоположением, заданным координатами широты и долготы. Для этого воспользуемся шорткодом Месторасположение: **\[=location:\<lat>|\<lng>|\<address>|<\<address\_2>>]**

Подготовим конструкцию для отправки:

1. Вместо **\<lat>** подставим значение: **50.260704.** Это координата широты.&#x20;
2. Вместо **\<lng>** подставим значение: **127.537495.** Это координата долготы.
3. Вместо **\<address>** напишем адрес места. В нашем случае это: **Зейская улица, 173.**
4. Параметр **<\<address\_2>>** является необязательным, его можно оставить незаполненным либо дописать дополнительный текст адреса: **Благовещенск, Амурская область.**

Соберём подготовленные данные в единое целое:

> **\[=location:50.260704|127.537495|Зейская улица, 173|Благовещенск, Амурская область]**

Полученный шорткод отправим клиенту, используя виджет в карточке сделки

<figure><img src="../.gitbook/assets/image (561).png" alt=""><figcaption></figcaption></figure>

В результате, в WhatsApp придёт сообщение такого вида:

<figure><img src="../.gitbook/assets/image (784).png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
Используя роботы и активити бизнес-процессов, данную конструкцию шорткода можно собирать и отправлять в автоматическом режиме, указывая в значениях переменные и поля, откуда робот или активити должны взять информацию.
{% endhint %}
